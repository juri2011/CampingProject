<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper

 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.campingga.mapper.ItemMapper">
<sql id="cols">
	item_no, item_name, content, price, regdate, category, status 
</sql>
	<select id="selectList" resultType="itemVO">
		select 
		<include refid="cols" />
		from item
	</select>
	
	<select id="selectListWithPaging" parameterType="criteria" resultType="itemVO">
		<![CDATA[
			select item_no, item_name, price
			from (
				select
					item_no,
					item_name,
					price,
					ROW_NUMBER() over(ORDER BY regdate desc) AS rownum
				from item i
			) i
			WHERE rownum > (#{pageNum}-1) * #{amount} and
				  rownum <= #{amount} * #{pageNum}
			order by rownum
		]]>
		
	</select>
	
	<select id="selectTotalCount" resultType="int">
		select count(*) from item
	</select>
</mapper>